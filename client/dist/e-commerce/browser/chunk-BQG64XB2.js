import{e as H}from"./chunk-TDMIGJZM.js";import{b as O}from"./chunk-JJNN7UF2.js";import{a as U}from"./chunk-R2CKWY32.js";import{Aa as a,Ba as V,Hb as G,Ib as j,Jb as z,Na as m,Qa as R,Ra as B,S as M,Sa as r,Ta as i,Ua as c,Va as L,W as w,Wa as p,Xa as E,ab as o,bb as u,da as k,ea as b,eb as P,fa as l,fb as N,ga as D,gb as q,hb as f,ib as y,o as C,pa as _,qa as I,xa as S}from"./chunk-EW7DCEDO.js";import{a as x,b as h,e as v}from"./chunk-FDERIQAA.js";var A=d=>[d],T=class d{productCartItem=I.required();onRemove=_();onIncrease=_();onDecrease=_();static \u0275fac=function(t){return new(t||d)};static \u0275cmp=w({type:d,selectors:[["app-cart-item"]],inputs:{productCartItem:[1,"productCartItem"]},outputs:{onRemove:"onRemove",onIncrease:"onIncrease",onDecrease:"onDecrease"},standalone:!0,features:[P],decls:27,vars:13,consts:[[1,"rounded-lg","border","break-inside-avoid","border-gray-200","p-4","shadow-sm","dark:border-gray-800","bg-slate-900","md:p-6"],[1,"space-y-4","md:flex","md:items-center","md:justify-between","md:gap-6","md:space-y-0"],[1,"shrink-0","md:order-1",3,"href"],[1,"hidden","w-20","dark:block","rounded-md",3,"src","alt"],["for","counter-input",1,"sr-only"],[1,"flex","items-center","justify-between","md:order-3","md:justify-end"],[1,"flex","items-center"],["type","button","id","decrement-button","data-input-counter-decrement","counter-input",1,"inline-flex","h-5","w-5","shrink-0","items-center","justify-center","rounded-md","border","border-gray-300","bg-gray-100","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-100","dark:border-gray-600","dark:bg-gray-700","dark:hover:bg-gray-600","dark:focus:ring-gray-700",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 18 2",1,"h-2.5","w-2.5","text-gray-900","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 1h16"],["type","text","id","counter-input","data-input-counter","","placeholder","","required","",1,"w-10","shrink-0","border-0","bg-transparent","text-center","text-sm","font-medium","text-gray-900","focus:outline-none","focus:ring-0","dark:text-white",3,"value"],["type","button","id","increment-button","data-input-counter-increment","counter-input",1,"inline-flex","h-5","w-5","shrink-0","items-center","justify-center","rounded-md","border","border-gray-300","bg-gray-100","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-100","dark:border-gray-600","dark:bg-gray-700","dark:hover:bg-gray-600","dark:focus:ring-gray-700",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 18 18",1,"h-2.5","w-2.5","text-gray-900","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 1v16M1 9h16"],[1,"text-end","md:order-4","md:w-32"],[1,"text-base","font-bold","text-gray-900","dark:text-white"],[1,"w-full","min-w-0","flex-1","space-y-4","md:order-2","md:max-w-md"],[1,"text-base","font-medium","text-gray-900","hover:underline","dark:text-white",3,"href"],[1,"flex","items-center","gap-4"],["type","button",1,"inline-flex","items-center","text-sm","font-medium","text-red-600","hover:underline","dark:text-red-500",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"me-1.5","h-5","w-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"a",2),c(3,"img",3),i(),r(4,"label",4),o(5,"Choose quantity:"),i(),r(6,"div",5)(7,"div",6)(8,"button",7),p("click",function(){return n.onDecrease.emit(n.productCartItem())}),l(),r(9,"svg",8),c(10,"path",9),i()(),D(),c(11,"input",10),r(12,"button",11),p("click",function(){return n.onIncrease.emit(n.productCartItem())}),l(),r(13,"svg",12),c(14,"path",13),i()()(),D(),r(15,"div",14)(16,"p",15),o(17),f(18,"currency"),i()()(),r(19,"div",16)(20,"a",17),o(21),i(),r(22,"div",18)(23,"button",19),p("click",function(){return n.onRemove.emit(n.productCartItem().product._id)}),l(),r(24,"svg",20),c(25,"path",21),i(),o(26," Remove "),i()()()()()),t&2&&(a(2),m("href",q(9,A,"/products/"+n.productCartItem().product._id),S),a(),m("src",n.productCartItem().product.image?n.productCartItem().product.image:"https://www.svgrepo.com/show/508699/landscape-placeholder.svg",S)("alt",n.productCartItem().product.title),a(8),m("value",n.productCartItem().quantity),a(6),u(y(18,7,n.productCartItem().product.price)),a(3),m("href",q(11,A,"/product/"+n.productCartItem().product._id),S),a(),u(n.productCartItem().product.title))},dependencies:[j]})};var Q=(d,e)=>e==null||e.product==null?null:e.product._id,W=()=>["/cart/checkout"];function X(d,e){if(d&1){let t=L();r(0,"app-cart-item",24),p("onRemove",function(s){k(t);let g=E();return b(g.onRemove(s.toString()))})("onIncrease",function(s){k(t);let g=E();return b(g.onIncrease(s))})("onDecrease",function(s){k(t);let g=E();return b(g.onDecrease(s))}),i()}if(d&2){let t=e.$implicit;m("productCartItem",t)}}var F=class d{constructor(e){this.productsService=e}state=M(O).state;product=I.required();onRemove(e){return v(this,null,function*(){this.state.remove(e);let t=localStorage.getItem("authToken");t&&(yield C(this.productsService.removeFromCart(e,t)))})}onIncrease(e){return v(this,null,function*(){this.state.update(h(x({},e),{quantity:e.quantity+1}));let t=localStorage.getItem("authToken");t&&(yield C(this.productsService.increaseCart(e.product._id,e.quantity+1,t)))})}onDecrease(e){return v(this,null,function*(){this.state.update(h(x({},e),{quantity:e.quantity-1})),e.quantity<=0&&this.state.update(h(x({},e),{quantity:0}));let t=localStorage.getItem("authToken");t&&(yield C(this.productsService.decreaseCart(e.product._id,e.quantity+1,t)))})}static \u0275fac=function(t){return new(t||d)(V(U))};static \u0275cmp=w({type:d,selectors:[["app-cart"]],inputs:{product:[1,"product"]},standalone:!0,features:[P],decls:38,vars:10,consts:[[1,"mt-10","py-8","px-10","antialiased","md:py-16","min-h-screen","max-w-screen-lg","mx-auto"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","sm:text-2xl"],[1,"mt-6","sm:mt-8","md:gap-6","lg:flex","lg:items-start","xl:gap-8"],[1,"mx-auto","w-full","flex-none","lg:max-w-xl"],[1,"space-y-6"],[1,"block",3,"productCartItem"],[1,"mx-auto","mt-6","max-w-4xl","flex-1","space-y-6","lg:mt-0","lg:w-full"],[1,"space-y-4","rounded-lg","border","border-gray-200","bg-white","p-4","shadow-sm","dark:border-gray-800","dark:bg-slate-900","sm:p-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"space-y-4"],[1,"space-y-2"],[1,"flex","items-center","justify-between","gap-4"],[1,"text-base","font-normal","text-gray-500","dark:text-gray-400"],[1,"text-base","font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2","dark:border-gray-700"],[1,"text-base","font-bold","text-gray-900","dark:text-white"],[1,"flex","w-full","items-center","justify-center","rounded-lg","bg-primary-700","font-medium","text-white","hover:bg-primary-800","focus:outline-none","focus:ring-4","focus:ring-primary-300","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"routerLink"],["type","submit",1,"flex","gap-2","justify-center","items-center","text-black","py-3","px-5","rounded-md","w-full",3,"disabled","ngClass"],[1,"far","fa-credit-card"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-sm","font-normal","text-gray-500","dark:text-gray-400"],["href","#","title","",1,"inline-flex","items-center","gap-2","text-sm","font-medium","text-primary-700","underline","hover:no-underline","dark:text-primary-500"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 12H5m14 0-4 4m4-4-4-4"],[1,"block",3,"onRemove","onIncrease","onDecrease","productCartItem"]],template:function(t,n){t&1&&(r(0,"section",0)(1,"div")(2,"h2",1),o(3,"Shopping Cart"),i(),r(4,"div",2)(5,"div",3)(6,"div",4),R(7,X,1,1,"app-cart-item",5,Q),i()(),r(9,"div",6)(10,"div",7)(11,"p",8),o(12,"Order summary"),i(),r(13,"div",9)(14,"div",10)(15,"dl",11)(16,"dt",12),o(17,"Original price"),i(),r(18,"dd",13),o(19),f(20,"currency"),i()()(),r(21,"dl",14)(22,"dt",15),o(23,"Total"),i(),r(24,"dd",15),o(25),f(26,"currency"),i()()(),r(27,"a",16)(28,"button",17),c(29,"i",18),o(30," Proceed to checkout "),i()(),r(31,"div",19)(32,"span",20),o(33," or "),i(),r(34,"a",21),o(35," Continue Shopping "),l(),r(36,"svg",22),c(37,"path",23),i()()()()()()()()),t&2&&(a(7),B(n.state.products()),a(12),u(y(20,5,n.state.price())),a(6),u(y(26,7,n.state.price())),a(2),m("routerLink",N(9,W)),a(),m("disabled",!(n.state().products.length>0))("ngClass",n.state().products.length>0?"bg-green-500 hover:bg-green-600":"bg-slate-500 cursor-not-allowed"))},dependencies:[T,j,H,z,G],encapsulation:2})};export{F as default};
