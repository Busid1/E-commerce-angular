import{e as N}from"./chunk-FWWEKZLT.js";import{b as H}from"./chunk-6QFINTJJ.js";import{a as z}from"./chunk-W636PHFJ.js";import{Aa as a,Ba as V,Hb as T,Na as c,Qa as R,Ra as B,S as M,Sa as r,Ta as n,Ua as s,Va as L,W as k,Wa as l,Xa as E,ab as o,bb as u,da as w,ea as b,eb as P,fa as p,fb as G,ga as D,gb as q,hb as g,ib as x,o as C,pa as _,qa as I,xa as S}from"./chunk-JMPQY6AR.js";import{a as y,b as h,e as v}from"./chunk-FDERIQAA.js";var U=m=>[m],j=class m{productCartItem=I.required();onRemove=_();onIncrease=_();onDecrease=_();static \u0275fac=function(t){return new(t||m)};static \u0275cmp=k({type:m,selectors:[["app-cart-item"]],inputs:{productCartItem:[1,"productCartItem"]},outputs:{onRemove:"onRemove",onIncrease:"onIncrease",onDecrease:"onDecrease"},standalone:!0,features:[P],decls:27,vars:13,consts:[[1,"rounded-lg","border","break-inside-avoid","border-gray-200","bg-white","p-4","shadow-sm","dark:border-gray-700","dark:bg-gray-800","md:p-6"],[1,"space-y-4","md:flex","md:items-center","md:justify-between","md:gap-6","md:space-y-0"],[1,"shrink-0","md:order-1",3,"href"],[1,"hidden","h-20","w-20","dark:block","rounded-md",3,"src","alt"],["for","counter-input",1,"sr-only"],[1,"flex","items-center","justify-between","md:order-3","md:justify-end"],[1,"flex","items-center"],["type","button","id","decrement-button","data-input-counter-decrement","counter-input",1,"inline-flex","h-5","w-5","shrink-0","items-center","justify-center","rounded-md","border","border-gray-300","bg-gray-100","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-100","dark:border-gray-600","dark:bg-gray-700","dark:hover:bg-gray-600","dark:focus:ring-gray-700",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 18 2",1,"h-2.5","w-2.5","text-gray-900","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 1h16"],["type","text","id","counter-input","data-input-counter","","placeholder","","required","",1,"w-10","shrink-0","border-0","bg-transparent","text-center","text-sm","font-medium","text-gray-900","focus:outline-none","focus:ring-0","dark:text-white",3,"value"],["type","button","id","increment-button","data-input-counter-increment","counter-input",1,"inline-flex","h-5","w-5","shrink-0","items-center","justify-center","rounded-md","border","border-gray-300","bg-gray-100","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-100","dark:border-gray-600","dark:bg-gray-700","dark:hover:bg-gray-600","dark:focus:ring-gray-700",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 18 18",1,"h-2.5","w-2.5","text-gray-900","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 1v16M1 9h16"],[1,"text-end","md:order-4","md:w-32"],[1,"text-base","font-bold","text-gray-900","dark:text-white"],[1,"w-full","min-w-0","flex-1","space-y-4","md:order-2","md:max-w-md"],[1,"text-base","font-medium","text-gray-900","hover:underline","dark:text-white",3,"href"],[1,"flex","items-center","gap-4"],["type","button",1,"inline-flex","items-center","text-sm","font-medium","text-red-600","hover:underline","dark:text-red-500",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"me-1.5","h-5","w-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"a",2),s(3,"img",3),n(),r(4,"label",4),o(5,"Choose quantity:"),n(),r(6,"div",5)(7,"div",6)(8,"button",7),l("click",function(){return i.onDecrease.emit(i.productCartItem())}),p(),r(9,"svg",8),s(10,"path",9),n()(),D(),s(11,"input",10),r(12,"button",11),l("click",function(){return i.onIncrease.emit(i.productCartItem())}),p(),r(13,"svg",12),s(14,"path",13),n()()(),D(),r(15,"div",14)(16,"p",15),o(17),g(18,"currency"),n()()(),r(19,"div",16)(20,"a",17),o(21),n(),r(22,"div",18)(23,"button",19),l("click",function(){return i.onRemove.emit(i.productCartItem().product._id)}),p(),r(24,"svg",20),s(25,"path",21),n(),o(26," Remove "),n()()()()()),t&2&&(a(2),c("href",q(9,U,"/products/"+i.productCartItem().product._id),S),a(),c("src",i.productCartItem().product.image,S)("alt",i.productCartItem().product.title),a(8),c("value",i.productCartItem().quantity),a(6),u(x(18,7,i.productCartItem().product.price)),a(3),c("href",q(11,U,"/products/"+i.productCartItem().product._id),S),a(),u(i.productCartItem().product.title))},dependencies:[T]})};var J=(m,e)=>e==null||e.product==null?null:e.product._id,K=()=>["/cart/checkout"];function Q(m,e){if(m&1){let t=L();r(0,"app-cart-item",23),l("onRemove",function(d){w(t);let f=E();return b(f.onRemove(d.toString()))})("onIncrease",function(d){w(t);let f=E();return b(f.onIncrease(d))})("onDecrease",function(d){w(t);let f=E();return b(f.onDecrease(d))}),n()}if(m&2){let t=e.$implicit;c("productCartItem",t)}}var F=class m{constructor(e){this.productsService=e}state=M(H).state;product=I.required();onRemove(e){return v(this,null,function*(){this.state.remove(e);let t=localStorage.getItem("authToken");t&&(yield C(this.productsService.removeFromCart(e,t)))})}onIncrease(e){return v(this,null,function*(){this.state.update(h(y({},e),{quantity:e.quantity+1}));let t=localStorage.getItem("authToken");t&&(yield C(this.productsService.increaseCart(e.product._id,e.quantity+1,t)))})}onDecrease(e){return v(this,null,function*(){this.state.update(h(y({},e),{quantity:e.quantity-1})),e.quantity<=0&&this.state.update(h(y({},e),{quantity:0}));let t=localStorage.getItem("authToken");t&&(yield C(this.productsService.decreaseCart(e.product._id,e.quantity+1,t)))})}static \u0275fac=function(t){return new(t||m)(V(z))};static \u0275cmp=k({type:m,selectors:[["app-cart"]],inputs:{product:[1,"product"]},standalone:!0,features:[P],decls:36,vars:8,consts:[[1,"bg-slate-950","mt-10","py-8","px-10","antialiased","md:py-16","min-h-screen","max-w-screen-xl","mx-auto"],[1,"mx-auto","max-w-screen-xl","px-4","2xl:px-0"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","sm:text-2xl"],[1,"mt-6","sm:mt-8","md:gap-6","lg:flex","lg:items-start","xl:gap-8"],[1,"mx-auto","w-full","flex-none","lg:max-w-2xl","xl:max-w-4xl"],[1,"space-y-6"],[1,"block",3,"productCartItem"],[1,"mx-auto","mt-6","max-w-4xl","flex-1","space-y-6","lg:mt-0","lg:w-full"],[1,"space-y-4","rounded-lg","border","border-gray-200","bg-white","p-4","shadow-sm","dark:border-gray-700","dark:bg-gray-800","sm:p-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"space-y-4"],[1,"space-y-2"],[1,"flex","items-center","justify-between","gap-4"],[1,"text-base","font-normal","text-gray-500","dark:text-gray-400"],[1,"text-base","font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2","dark:border-gray-700"],[1,"text-base","font-bold","text-gray-900","dark:text-white"],[1,"flex","w-full","items-center","justify-center","rounded-lg","bg-primary-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-primary-800","focus:outline-none","focus:ring-4","focus:ring-primary-300","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"routerLink"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-sm","font-normal","text-gray-500","dark:text-gray-400"],["href","#","title","",1,"inline-flex","items-center","gap-2","text-sm","font-medium","text-primary-700","underline","hover:no-underline","dark:text-primary-500"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 12H5m14 0-4 4m4-4-4-4"],[1,"block",3,"onRemove","onIncrease","onDecrease","productCartItem"]],template:function(t,i){t&1&&(r(0,"section",0)(1,"div",1)(2,"h2",2),o(3,"Shopping Cart"),n(),r(4,"div",3)(5,"div",4)(6,"div",5),R(7,Q,1,1,"app-cart-item",6,J),n()(),r(9,"div",7)(10,"div",8)(11,"p",9),o(12,"Order summary"),n(),r(13,"div",10)(14,"div",11)(15,"dl",12)(16,"dt",13),o(17,"Original price"),n(),r(18,"dd",14),o(19),g(20,"currency"),n()()(),r(21,"dl",15)(22,"dt",16),o(23,"Total"),n(),r(24,"dd",16),o(25),g(26,"currency"),n()()(),r(27,"a",17),o(28,"Proceed to Checkout"),n(),r(29,"div",18)(30,"span",19),o(31," or "),n(),r(32,"a",20),o(33," Continue Shopping "),p(),r(34,"svg",21),s(35,"path",22),n()()()()()()()()),t&2&&(a(7),B(i.state.products()),a(12),u(x(20,3,i.state.price())),a(6),u(x(26,5,i.state.price())),a(2),c("routerLink",G(7,K)))},dependencies:[j,T,N]})};export{F as default};
